System.registerDynamic("dist/directives/canvas.view.directive.js",["@angular/core"],!0,function(a,b,c){"use strict";var d=(this||self,this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g}),e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};const f=a("@angular/core");let g=class a{};return g=d([f.Directive({selector:"view-canvas"}),e("design:paramtypes",[])],g),c.exports}),System.registerDynamic("dist/components/navbar.component.js",["@angular/core"],!0,function(a,b,c){"use strict";var d=(this||self,this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g}),e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};const f=a("@angular/core");let g=class a{};return g=d([f.Component({selector:"navbar",templateUrl:"templates/navbar.html",styleUrls:["stylesheets/navbar.css"]}),e("design:paramtypes",[])],g),b.NavbarComponent=g,c.exports}),System.registerDynamic("dist/components/app.component.js",["@angular/core","../services/loader.service"],!0,function(a,b,c){"use strict";var d=(this||self,this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g}),e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};const f=a("@angular/core"),g=a("../services/loader.service");let h=class a{};return h=d([f.Component({selector:"app",templateUrl:"templates/app.html",providers:[g.LoaderService]}),e("design:paramtypes",[])],h),b.AppComponent=h,c.exports}),System.registerDynamic("dist/services/loader.service.js",["@angular/core","@angular/http","rxjs/Observable","rxjs/Subject","rxjs/add/operator/toPromise","rxjs/add/operator/map","rxjs/add/operator/catch","rxjs/add/observable/throw","../types/linalg.type"],!0,function(a,b,c){"use strict";var d=(this||self,this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g}),e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};const f=a("@angular/core"),g=a("@angular/http"),h=a("rxjs/Observable"),i=a("rxjs/Subject");a("rxjs/add/operator/toPromise"),a("rxjs/add/operator/map"),a("rxjs/add/operator/catch"),a("rxjs/add/observable/throw");const j=a("../types/linalg.type");let k=class a{constructor(a){this.http=a,this.ModelDescUrl="data/desc.json",this.modelLoadedSource=new i.Subject,this.modelLoaded$=this.modelLoadedSource.asObservable()}getModelDescriptions(){return this.http.get(this.ModelDescUrl).map(a=>a.json()).catch(this.handleError)}loadModel(a){return this.http.get(a.path).map(a=>{const b=this.processModel(a.text());return this.modelLoadedSource.next(b),b}).catch(this.handleError)}processModel(a){let b={vertices:[],faces:[]};for(let c of a.split("\n"))if(c.length){const a=c.split(" ");if(!(a.length<4))switch(a[0]){case"v":b.vertices.push(new j.Vec4(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]),1));break;case"f":const c=parseInt(a[1])-1;for(let d=3;d<a.length;d++)b.faces.push({v1:c,v2:parseInt(a[d-1])-1,v3:parseInt(a[d])-1});break;default:console.log("unrecognized command "+a[0])}}return b}handleError(a){let b;return b=a instanceof g.Response?`${a.status} - ${a.statusText||""}`:a.message?a.message:a.toString(),h.Observable.throw(b)}};return k=d([f.Injectable(),e("design:paramtypes",[g.Http])],k),b.LoaderService=k,c.exports}),System.registerDynamic("dist/components/sidebar.component.js",["@angular/core","../services/loader.service"],!0,function(a,b,c){"use strict";var d=(this||self,this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g}),e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};const f=a("@angular/core"),g=a("../services/loader.service");let h=class a{constructor(a){this.loader=a,this.selectedModel=null,this.models=null,this.loading=!0}ngOnInit(){this.loader.getModelDescriptions().subscribe(a=>{this.models=a,this.loading=!1},a=>console.error(a))}loadModel(a){this.loading=!0;const b=this.selectedModel;this.selectedModel=a,this.loader.loadModel(a).subscribe(()=>this.loading=!1,a=>{this.loading=!1,this.selectedModel=b,console.log(a),alert(a)})}};return h=d([f.Component({selector:"sidebar",templateUrl:"templates/sidebar.html",styleUrls:["stylesheets/sidebar.css"]}),e("design:paramtypes",[g.LoaderService])],h),b.SidebarComponent=h,c.exports}),System.registerDynamic("dist/types/linalg.type.js",[],!0,function(a,b,c){"use strict";function d(a,b,c,d){const e=Math.tan(a/180*Math.PI*.5)*c,f=b*e;return new g(c/f,0,0,0,0,c/e,0,0,0,0,(d+c)/(c-d),2*d*c/(c-d),0,0,-1,0)}function e(a,b,c){const d=b.sub(a).normalize(),e=d.cross(c.normalize()).normalize(),f=e.cross(d).normalize();return new g(e.d[0],e.d[1],e.d[2],-e.dot(a),f.d[0],f.d[1],f.d[2],-f.dot(a),-d.d[0],-d.d[1],-d.d[2],d.dot(a),0,0,0,1)}this||self;class f{constructor(a=0,b=0,c=0,d=0){this.d=[0,0,0,0],this.d[0]=a,this.d[1]=b,this.d[2]=c,this.d[3]=d}x(){return this.d[0]}y(){return this.d[1]}z(){return this.d[2]}w(){return this.d[3]}sub(a){return new f(this.d[0]-a.d[0],this.d[1]-a.d[1],this.d[2]-a.d[2],this.d[3]-a.d[3])}norm(){return Math.sqrt(this.d[0]*this.d[0]+this.d[1]*this.d[1]+this.d[2]*this.d[2]+this.d[3]*this.d[3])}normalize(){const a=this.norm();return new f(this.d[0]/a,this.d[1]/a,this.d[2]/a,this.d[3]/a)}dot(a){return this.d[0]*a.d[0]+this.d[1]*a.d[1]+this.d[2]*a.d[2]+this.d[3]*a.d[3]}cross(a){return new f(this.d[1]*a.d[2]-this.d[2]*a.d[1],this.d[2]*a.d[0]-this.d[0]*a.d[2],this.d[0]*a.d[1]-this.d[1]*a.d[0],0)}}b.Vec4=f;class g{constructor(a=0,b=0,c=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0){this.d=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.d[0][0]=a,this.d[0][1]=b,this.d[0][2]=c,this.d[0][3]=d,this.d[1][0]=e,this.d[1][1]=f,this.d[1][2]=g,this.d[1][3]=h,this.d[2][0]=i,this.d[2][1]=j,this.d[2][2]=k,this.d[2][3]=l,this.d[3][0]=m,this.d[3][1]=n,this.d[3][2]=o,this.d[3][3]=p}apply(a){let b=new f;for(let c=0;c<4;c++)for(let d=0;d<4;d++)b.d[c]+=this.d[c][d]*a.d[d];return b}mul(a){let b=new g;for(let c=0;c<4;c++)for(let d=0;d<4;d++)for(let e=0;e<4;e++)b.d[c][d]+=this.d[c][e]*a.d[e][d];return b}}return b.Mat4=g,b.buildProjectionMatrix=d,b.buildViewMatrix=e,c.exports}),System.registerDynamic("dist/components/view.component.js",["@angular/core","../types/linalg.type"],!0,function(a,b,c){"use strict";var d=(this||self,this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g}),e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};const f=a("@angular/core"),g=a("../types/linalg.type");let h=class a{constructor(a,b){this.element=a,this.renderer=b,this.canvas=null,this.ctx=null,this.width=0,this.height=0,this.pMatrix=null,this.pvMatrix=null,this.camera={eye:new g.Vec4(-1.8,-1.8,.6),at:new g.Vec4(0,0,.6),up:new g.Vec4(0,0,1)},this.zbuffer=null,this.canvas=a.nativeElement,this.ctx=this.canvas.getContext("2d"),this.width=this.canvas.clientWidth,this.height=this.canvas.clientHeight,this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.width,this.height),this.resetMatrices()}resetMatrices(){this.pMatrix=g.buildProjectionMatrix(70,this.height?this.width/this.height:this.width,1,1e3);let a=g.buildViewMatrix(this.camera.eye,this.camera.at,this.camera.up);this.pvMatrix=this.pMatrix.mul(g.buildViewMatrix(this.camera.eye,this.camera.at,this.camera.up)),console.dir(this.pMatrix),console.dir(a),console.dir(this.pvMatrix)}onResize(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.width=this.canvas.clientWidth,this.height=this.canvas.clientHeight,this.resetMatrices()},100)}};d([f.HostListener("window:resize"),e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],h.prototype,"onResize",null),h=d([f.Directive({selector:"[view-canvas]"}),e("design:paramtypes",[f.ElementRef,f.Renderer])],h),b.ViewCanvasDirective=h;let i=class a{ngAfterViewInit(){console.log("view init"),console.dir(this.canvas)}};return d([f.ViewChild(h),e("design:type",h)],i.prototype,"canvas",void 0),i=d([f.Component({selector:"view",template:"<canvas view-canvas></canvas>",styles:["canvas { width: 100%; height: 100%; }"]}),e("design:paramtypes",[])],i),b.ViewComponent=i,c.exports}),System.registerDynamic("dist/modules/core.module.js",["@angular/core","@angular/platform-browser","@ng-bootstrap/ng-bootstrap","@angular/http","../components/navbar.component","../components/app.component","../components/sidebar.component","../components/view.component"],!0,function(a,b,c){"use strict";var d=(this||self,this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g}),e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};const f=a("@angular/core"),g=a("@angular/platform-browser"),h=a("@ng-bootstrap/ng-bootstrap"),i=a("@angular/http"),j=a("../components/navbar.component"),k=a("../components/app.component"),l=a("../components/sidebar.component"),m=a("../components/view.component");let n=class a{};return n=d([f.NgModule({imports:[g.BrowserModule,i.HttpModule,i.JsonpModule,h.NgbModule.forRoot()],declarations:[k.AppComponent,j.NavbarComponent,l.SidebarComponent,m.ViewComponent,m.ViewCanvasDirective],bootstrap:[k.AppComponent]}),e("design:paramtypes",[])],n),b.CoreModule=n,c.exports}),System.registerDynamic("dist/index.js",["@angular/platform-browser-dynamic","./modules/core.module"],!0,function(a,b,c){"use strict";this||self;const d=a("@angular/platform-browser-dynamic"),e=a("./modules/core.module");return d.platformBrowserDynamic().bootstrapModule(e.CoreModule),c.exports}),System.registerDynamic("dist/modules/core.js",["@angular/core","@angular/platform-browser"],!0,function(a,b,c){"use strict";var d=(this||self,this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g}),e=a("@angular/core"),f=a("@angular/platform-browser"),g=function(){function a(){}return a=d([e.NgModule({imports:[f.BrowserModule],declarations:[],bootstrap:[]})],a)}();return b.CoreModule=g,c.exports}),System.registerDynamic("dist/types/math.type.js",[],!1,function(a,b,c){var d=System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){}(this),d()}),System.registerDynamic("dist/types/model.js",[],!1,function(a,b,c){var d=System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){}(this),d()}),System.registerDynamic("dist/types/model.type.js",[],!1,function(a,b,c){var d=System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){}(this),d()}),System.registerDynamic("dist/types/view.type.js",[],!1,function(a,b,c){var d=System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){}(this),d()});
//# sourceMappingURL=zbuffer.js.map